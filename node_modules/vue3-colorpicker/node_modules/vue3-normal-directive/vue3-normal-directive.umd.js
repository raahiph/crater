!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("clipboard"),require("body-scroll-lock"),require("lodash-es")):"function"==typeof define&&define.amd?define(["exports","clipboard","body-scroll-lock","lodash-es"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3NormalDirective={},e.Clipboard,e.bodyScrollLock,e.lodashEs)}(this,(function(e,t,n,o){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=l(t);const r="undefined"==typeof window,i=new Map;let c;function d(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:n.push(t.arg),function(o,l){const a=t.instance.popperRef,r=o.target,i=l.target,c=!t||!t.instance,d=!r||!i,s=e.contains(r)||e.contains(i),u=e===r,f=n.length&&n.some((e=>null==e?void 0:e.contains(r)))||n.length&&n.includes(i),p=a&&(a.contains(r)||a.contains(i));c||d||s||u||f||p||t.value()}}r||(document.addEventListener("mousedown",(e=>c=e)),document.addEventListener("mouseup",(e=>{for(const{documentHandler:t}of i.values())t(e,c)})));const s={beforeMount(e,t){i.set(e,{documentHandler:d(e,t),bindingFn:t.value})},updated(e,t){i.set(e,{documentHandler:d(e,t),bindingFn:t.value})},unmounted(e){i.delete(e)}},u={install:e=>{e.directive("click-outside",s)}},f={mounted:(e,t)=>{const{arg:n,value:o}=t,l=()=>o&&"function"==typeof o&&o();switch(n){case"success":e.clipboardSuccessHandler=l;break;case"error":e.clipboardErrorHandler=l;break;default:{e.clipboardHandler=l;const t=new a.default(e,{text:()=>o,action:()=>"cut"===n?"cut":"copy"});t.on("success",(t=>{const n=e.clipboardSuccessHandler;n&&n(t)})),t.on("error",(t=>{const n=e.clipboardErrorHandler;n&&n(t)})),e.clipboardInstance=t}}},updated:(e,t)=>{const{arg:n,value:o}=t;switch(n){case"success":e.clipboardSuccessHandler=o;break;case"error":e.clipboardErrorHandler=o;break;default:e.clipboardInstance.text=function(){return t.value},e.clipboardInstance.action=function(){return"cut"===t.arg?"cut":"copy"}}},unmounted:(e,t)=>{const{arg:n}=t;switch(n){case"success":delete e.clipboardSuccessHandler;break;case"error":delete e.clipboardErrorHandler;break;default:e.clipboardInstance.destroy(),delete e.clipboardInstance}}},p={install:e=>{e.directive("clipboard",f)}},b={checkFunc:()=>!0},h={mounted:(e,t)=>{const n=t.value;if(n&&b.checkFunc){b.checkFunc(n)||e.parentNode&&e.parentNode.removeChild(e)}}},v={install:(e,t)=>{console.log(t),(null==t?void 0:t.checkFunc)&&(b.checkFunc=t.checkFunc),e.directive("permission",h)}},g="rgba(180, 180, 180, 0.3)";let y={defaultWatermark:"Test Text",font:"16px Microsoft JhengHei",fontColor:g,width:200,height:200,angle:-20*Math.PI/180};const m={created:(e,t)=>{((e,t)=>{const n=document.createElement("canvas");e.appendChild(n),n.width=(t&&"string"!=typeof t?t.width:y.width)||y.width,n.height=(t&&"string"!=typeof t?t.height:y.height)||y.height,n.style.display="none";const o=n.getContext("2d");if(o){o.rotate(t&&"string"!=typeof t&&t.angle||y.angle),o.font=(t&&"string"!=typeof t?t.font:y.font)||"",o.fillStyle=(t&&"string"!=typeof t?t.fontColor:y.fontColor)||g,o.textAlign="left",o.textBaseline="middle";const e=t&&"string"!=typeof t?t.text||y.defaultWatermark:t;o.fillText(e,n.width/10,n.height/2)}e.style.backgroundImage="url("+n.toDataURL("image/png")+")"})(e,t.value)}},k={install:(e,t)=>{y=Object.assign({},y,t),e.directive("water-marker",m)}};let w={};const x={mounted:(e,t)=>{t.value&&n.disableBodyScroll(e,w)},updated:(e,t)=>{t.value?n.disableBodyScroll(e,w):n.enableBodyScroll(e)},unmounted:e=>{n.enableBodyScroll(e)}},S={install:(e,t)=>{t&&(w=t),e.directive("scroll-lock",x)}},H={delay:50,interval:400},E={created:(e,t)=>{if("function"==typeof t.value){let n,o;const l=()=>{null!==n&&(clearTimeout(n),n=null),o&&(clearInterval(o),o=null)},a=e=>{t.value(e)},r=e=>{"click"===e.type&&0!==e.button||null===n&&(n=setTimeout((()=>{H.interval&&H.interval>0&&(o=setInterval((()=>{a(e)}),H.interval)),a(e)}),H.delay))};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,r))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,l)))}}},F={install:(e,t)=>{(null==t?void 0:t.interval)&&(H.interval=t.interval),(null==t?void 0:t.delay)&&(H.delay=t.delay),e.directive("long-click",E)}};let C={delay:200,ratio:1,minFontSize:"16px",maxFontSize:"500px"};const L=function(e,t){e.style.fontSize=Math.max(Math.min(e.clientWidth/(10*t.ratio),parseFloat(t.maxFontSize)),parseFloat(t.minFontSize))+"px"},_={mounted:(e,t)=>{const{value:n}=t,l=Object.assign({},C,n);e.__opts=l,e.__debounceHandler=o.debounce((function(){L(e,l)}),l.delay),"undefined"!=typeof window&&window.addEventListener("resize",e.__debounceHandler,{passive:!0}),L(e,l)},unmounted:e=>{"undefined"!=typeof window&&window.removeEventListener("resize",e.__debounceHandler)}},z={install:(e,t)=>{t&&(C=t),e.directive("resize-text",_)}},I=[u,p,v,k,S,F,z],M={install:e=>{I.forEach((t=>{e.use(t)}))}};e.ClickOutside=u,e.Clipboard=p,e.LongClick=F,e.Permission=v,e.ResizeText=z,e.ScrollLock=S,e.WaterMarker=k,e.default=M,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
