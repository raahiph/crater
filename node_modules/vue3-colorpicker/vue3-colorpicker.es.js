var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,r)=>{for(var u in r||(r={}))a.call(r,u)&&o(e,u,r[u]);if(l)for(var u of l(r))t.call(r,u)&&o(e,u,r[u]);return e};import{ClickOutside as u}from"vue3-normal-directive";import{defineComponent as n,ref as s,computed as i,watch as v,onMounted as h,nextTick as c,createVNode as d,getCurrentInstance as p,reactive as g,toRaw as f,createTextVNode as b,withDirectives as m,vModelText as y,Fragment as x,Teleport as C,mergeProps as k,resolveDirective as B}from"vue";import _ from"tinycolor2";import{isDef as H,isNull as M,DOMUtils as S,ArrayUtils as P}from"@aesoper/normal-utils";import{debounce as w}from"lodash-es";import{createPopper as R}from"@popperjs/core";import W,{useStorage as U}from"vue3-storage";import{useClipboard as L}from"@vueuse/core";class z{constructor(){var e,l,a;e=this,l="instance",a=_("#000000"),o(e,"symbol"!=typeof l?l+"":l,a)}parseColor(e,l){(H(e)||M(e))&&(e="#000000"),e&&e.hsl?this.instance=_(e.hsl):e&&e.hex&&e.hex.length>0?this.instance=_(e.hex):e&&e.hex8&&e.hex8.length>0?this.instance=_(e.hex8):e&&e.hsv?this.instance=_(e.hsv):e&&e.rgba?this.instance=_(e.rgba):e&&e.rgb?this.instance=_(e.rgb):this.instance=_(e);const a=this.instance.toHsl(),t=this.instance.toHsv(),o=this.instance.toRgb();return 0===a.s&&(t.h=a.h=e.h||e.hsl&&e.hsl.h||l||0),0!==t.h&&0!==a.h||(t.h=a.h=e.h||l||e.oldHue||0),0===t.v&&(t.s=e.s&&e.s||e.hsv&&e.hsv.s||0),{hsl:{h:Math.round(a.h),s:Number(Math.round(100*a.s).toFixed(2))/100,l:Number(Math.round(100*a.l).toFixed(2))/100,a:Math.round(100*a.a)/100},hex:this.instance.toHexString().toUpperCase(),hex8:this.instance.toHex8String().toUpperCase(),rgb:{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b),a:Math.round(100*o.a)/100},hsv:{h:Math.round(t.h),s:Math.round(100*t.s)/100,v:Math.round(100*t.v)/100,a:Math.round(100*a.a)/100},oldHue:Math.round(e.h||l||a.h),source:e.source,alpha:Math.round(100*(e.a||this.instance.getAlpha()))/100}}format(e){return this.instance.toString(e)}}const A=w((e=>{e()}),200,{leading:!0,trailing:!1});var O=n({name:"Hue",props:{vertical:{type:Boolean,default:!1},size:{type:String,default:"default"},hue:{type:Number,default:0,validator:e=>e>=0&&e<=360}},emits:["update:hue","change"],setup(e,{emit:l}){const a=s(null),t=s(null),o=s(0),r=s(0),u=s(e.hue),n=i((()=>({background:e.vertical?"-webkit-linear-gradient(bottom, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 16.66%, rgb(0, 255, 0) 33.33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 66.66%, rgb(255, 0, 255) 83.33%, rgb(255, 0, 0) 100%)":"-webkit-linear-gradient(left, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 16.66%, rgb(0, 255, 0) 33.33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 66.66%, rgb(255, 0, 255) 83.33%, rgb(255, 0, 0) 100%)"}))),p=()=>{o.value=(()=>{var l;if(e.vertical)return 0;if(a.value&&t.value){const e=null==(l=a.value)?void 0:l.getBoundingClientRect();return 360===u.value?e.width-t.value.offsetWidth/2:u.value%360*(e.width-t.value.offsetWidth)/360+t.value.offsetWidth/2}return 0})(),r.value=(()=>{var l,o;if(!e.vertical)return 0;if(a.value&&t.value){const e=null==(l=a.value)?void 0:l.getBoundingClientRect();return 360===u.value?(null==(o=t.value)?void 0:o.offsetHeight)/2:(360-u.value%360)*(e.height-t.value.offsetHeight)/360+t.value.offsetHeight/2}return 0})()},g=o=>{var r,n;if(a.value&&t.value){const s=null==(r=a.value)?void 0:r.getBoundingClientRect();if(e.vertical){let e=o.clientY-s.top;e=Math.min(e,s.height-(null==(n=t.value)?void 0:n.offsetHeight)/2),e=Math.max(t.value.offsetHeight/2,e),u.value=Math.round((e-t.value.offsetHeight/2)/(s.height-t.value.offsetHeight)*360)}else{let e=o.clientX-s.left;e=Math.min(e,s.width-t.value.offsetWidth/2),e=Math.max(t.value.offsetWidth/2,e),u.value=Math.round((e-t.value.offsetWidth/2)/(s.width-t.value.offsetWidth)*360)}l("update:hue",u.value),l("change",u.value)}},f=e=>{e.target!==t.value&&g(e)};return v((()=>e.hue),(e=>{u.value=e})),v((()=>u.value),(()=>{p()})),h((()=>{c((()=>{const e={drag:e=>{g(e)},end:e=>{g(e)}};a.value&&t.value&&(S.triggerDragEvent(a.value,e),S.triggerDragEvent(t.value,e)),p()}))})),()=>{const l=["bee-hue-colorPicker","transparent",{"is-vertical":e.vertical,"small-hue-slider":"small"===e.size&&!e.vertical}];return d("div",{class:l,onClick:f},[d("div",{class:"bee-hue-colorPicker__inner",ref:a,style:n.value},[d("div",{class:["bee-hue-colorPicker__inner-pointer",{"small-bar":"small"===e.size&&!e.vertical}],ref:t,style:{left:o.value+"px",top:r.value+"px"}},[d("div",{class:["bee-hue-colorPicker__inner-handle",{vertical:e.vertical}]},null)])])])}}});const j=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]];var V=n({name:"Compact",props:{palette:{type:Array,default:()=>j}},emits:["change"],setup(e,{emit:l}){const a=e=>e.map((e=>{return d("div",{class:"bee-compact__color-cube--wrap"},[d("div",{class:["bee-compact__color_cube",{advance:"advance"===e,transparent:"transparent"===e}],style:(a=e,"transparent"===a?a:"advance"===a?{}:{background:_(a).toRgbString()}),onClick:()=>(e=>{l("change",e)})(e)},null)]);var a}));return()=>{return d("div",{class:"bee-compact"},[null==(l=e.palette)?void 0:l.map((e=>d("div",{class:"bee-compact__row"},[a(e)])))]);var l}}});const E=(e,l,a)=>l<a?e<l?l:e>a?a:e:e<a?a:e>l?l:e;var N=n({name:"Saturation",props:{hue:{type:Number,default:0,validator:e=>e>=0&&e<=360},saturation:{type:Number,default:0,validator:e=>e>=0&&e<=1},value:{type:Number,default:0,validator:e=>e>=0&&e<=1},round:Boolean,hidden:Boolean},emits:["update:saturation","update:value","change"],setup(e,{emit:l}){const a=p(),t=s(0),o=s(0),r=s("hsl("+e.hue+", 100%, 50%)"),u=g({h:e.hue,s:e.saturation,v:e.value}),n=()=>{if(a){const e=a.vnode.el;o.value=u.s*(null==e?void 0:e.clientWidth),t.value=(1-u.v)*(null==e?void 0:e.clientHeight)}},i=e=>{if(a){const r=a.vnode.el,n=null==r?void 0:r.getBoundingClientRect();let s=e.clientX-n.left,i=e.clientY-n.top;s=E(s,0,n.width),i=E(i,0,n.height);const v=Math.round(s/n.width*100)/100,h=Math.round(100*E(-i/n.height+1,0,1))/100;o.value=s,t.value=i,u.s=v,u.v=h,l("update:saturation",v),l("update:value",h),l("change",v,h)}};return h((()=>{a&&a.vnode.el&&(S.triggerDragEvent(a.vnode.el,{drag:e=>{i(e)},end:e=>{i(e)}}),n())})),v((()=>e.hue),(e=>{u.h=e,r.value="hsl("+Math.round(u.h)+", 100%, 50%)"})),v((()=>e.value),(e=>{u.v=e,n()})),v((()=>e.saturation),(e=>{u.s=e,n()})),()=>{const l=["bee-saturation",{"bee-saturation__chrome":e.round,"bee-saturation__hidden":e.hidden}];return d("div",{class:l,style:{backgroundColor:r.value}},[d("div",{class:"bee-saturation__white"},null),d("div",{class:"bee-saturation__black"},null),d("div",{class:"bee-saturation__cursor",style:{top:t.value+"px",left:o.value+"px"},onClick:i},[d("div",null,null)])])}}}),$=n({name:"Alpha",props:{color:{type:String,default:"#000000"},vertical:{type:Boolean,default:!1},size:{type:String,default:"default"},alpha:{type:Number,default:1,validator:e=>e>=0&&e<=1}},emits:["update:alpha","change"],setup(e,{emit:l}){const a=s(null),t=s(null),o=s(0),r=s(0),u=s(e.alpha),n=i((()=>{const l=_(e.color).setAlpha(1).toRgbString(),a=_(e.color).setAlpha(0).toRgbString();let t="right";return e.vertical&&(t="bottom"),{background:`linear-gradient(to ${t}, ${a}, ${l}`}})),p=()=>{o.value=(()=>{var l,o,r;if(e.vertical)return 0;if(a.value&&t.value){const e=u.value,n=null==(l=a.value)?void 0:l.getBoundingClientRect();return Math.round(e*(n.width-(null==(o=t.value)?void 0:o.offsetWidth))+(null==(r=t.value)?void 0:r.offsetWidth)/2)}return 0})(),r.value=(()=>{var l;if(!e.vertical)return 0;if(a.value&&t.value){const e=u.value,o=null==(l=a.value)?void 0:l.getBoundingClientRect();return Math.round(e*(o.height-t.value.offsetHeight)+t.value.offsetHeight/2)}return 0})()},g=o=>{var r;if(o.stopPropagation(),a.value&&t.value){const n=null==(r=a.value)?void 0:r.getBoundingClientRect();if(e.vertical){let e=o.clientY-n.top;e=Math.max(t.value.offsetHeight/2,e),e=Math.min(e,n.height-t.value.offsetHeight/2),u.value=1-Math.round((e-t.value.offsetHeight/2)/(n.height-t.value.offsetHeight)*100)/100}else{let e=o.clientX-n.left;e=Math.max(t.value.offsetWidth/2,e),e=Math.min(e,n.width-t.value.offsetWidth/2),u.value=Math.round((e-t.value.offsetWidth/2)/(n.width-t.value.offsetWidth)*100)/100}l("update:alpha",u.value),l("change",u.value)}},f=e=>{e.target!==a.value&&g(e)};return v((()=>e.alpha),(()=>{u.value=e.alpha})),v((()=>u.value),(()=>{p()})),h((()=>{c((()=>{const e={drag:e=>{g(e)},end:e=>{g(e)}};a.value&&t.value&&(S.triggerDragEvent(a.value,e),S.triggerDragEvent(a.value,e))})),p()})),()=>{const l=["bee-alpha-slider","transparent",{"is-vertical":e.vertical,"small-alpha-slider":"small"===e.size&&!e.vertical}];return d("div",{class:l},[d("div",{class:"bee-alpha-slider__bar",ref:a,style:n.value,onClick:f},[d("div",{class:["bee-alpha-slider__bar-pointer",{"small-bar":"small"===e.size&&!e.vertical}],ref:t,style:{left:o.value+"px",top:r.value+"px"}},[d("div",{class:["bee-alpha-slider__bar-handle",{vertical:e.vertical}]},null)])])])}}}),D=n({name:"Light",props:{vertical:{type:Boolean,default:!1},size:{type:String,default:"default"},light:{type:Number,default:0,validator:e=>e>=0&&e<=100},hue:{type:Number,default:0,validator:e=>e>=0&&e<=360},saturation:{type:Number,default:0,validator:e=>e>=0&&e<=100}},emits:["update:light","change"],setup(e,{emit:l}){const a=s(null),t=s(null),o=s(0),r=s(0),u=s(e.light),n=i((()=>{const l=_({h:e.hue,s:e.saturation,l:.8}).toPercentageRgbString(),a=_({h:e.hue,s:e.saturation/100,l:.6}).toPercentageRgbString(),t=_({h:e.hue,s:e.saturation/100,l:.4}).toPercentageRgbString(),o=_({h:e.hue,s:e.saturation/100,l:.2}).toPercentageRgbString();let r="left";return e.vertical&&(r="top"),{background:`-webkit-linear-gradient(${r}, rgb(255, 255, 255), ${l}, ${a}, ${t}, ${o}, rgb(0, 0, 0))`}})),p=()=>{o.value=(()=>{var l;if(e.vertical)return 0;if(a.value&&t.value)return(100-u.value)/100*((null==(l=a.value)?void 0:l.getBoundingClientRect()).width-t.value.offsetWidth)+t.value.offsetWidth/2;return 7})(),r.value=(()=>{var l,o,r;if(!e.vertical)return 0;if(a.value&&t.value)return(100-u.value)/100*((null==(l=a.value)?void 0:l.getBoundingClientRect()).height-(null==(o=t.value)?void 0:o.offsetHeight))+(null==(r=t.value)?void 0:r.offsetHeight)/2;return 0})()},g=o=>{var r,n;if(a.value&&t.value){const s=null==(r=a.value)?void 0:r.getBoundingClientRect();let i=u.value;if(e.vertical){let e=o.clientY-s.top;e=Math.max((null==(n=t.value)?void 0:n.offsetHeight)/2,e),e=Math.min(e,s.height-t.value.offsetHeight/2),i=Math.round((e-t.value.offsetHeight/2)/(s.height-t.value.offsetHeight)*100),u.value=i}else{let e=o.clientX-s.left;e=Math.max(t.value.offsetWidth/2,e),e=Math.min(e,s.width-t.value.offsetWidth/2),i=Math.round((e-t.value.offsetWidth/2)/(s.width-t.value.offsetWidth)*100),u.value=100-i}l("update:light",u.value),l("change",u.value)}},f=e=>{e.target!==t.value&&g(e)};return v((()=>e.light),(e=>{u.value=e})),v((()=>u.value),(()=>{p()})),h((()=>{c((()=>{const e={drag:e=>{g(e)},end:e=>{g(e)}};a.value&&t.value&&(S.triggerDragEvent(a.value,e),S.triggerDragEvent(t.value,e)),p()}))})),()=>{const l=["bee-light-colorPicker","transparent",{"is-vertical":e.vertical,"small-light-slider":"small"===e.size&&!e.vertical}];return d("div",{class:l},[d("div",{class:"bee-light-colorPicker__inner",ref:a,style:n.value,onClick:f},[d("div",{class:["bee-light-colorPicker__inner-pointer",{"small-bar":"small"===e.size&&!e.vertical}],ref:t,style:{left:o.value+"px",top:r.value+"px"}},[d("div",{class:["bee-light-colorPicker__inner-handle",{vertical:e.vertical}]},null)])])])}}}),F=n({name:"History",props:{colorList:{type:Array,default:()=>[]},round:{type:Boolean,default:!0}},emits:["change"],setup:(e,{emit:l})=>()=>{var a;return d("div",{class:"bee-colorPicker__record"},[d("div",{class:"color-list"},[null==(a=e.colorList)?void 0:a.map((a=>d("div",{class:["color-item","transparent",{"color-item__round":e.round}],onClick:()=>{l("change",a)}},[d("div",{class:"color-item__display",style:{backgroundColor:a}},null)])))])])}});var T=n({name:"FkColorPicker",props:{color:{type:[String,Object],default:"#000000"},format:{type:String},disableAlpha:Boolean,disableLight:Boolean,disableHue:Boolean,disableHistory:Boolean,disableClipboard:Boolean,displayCurrentColor:{type:Boolean,default:!0},historyRound:Boolean,copyBtnText:{type:String,default:"复制"},backBtnText:{type:String,default:"返回"}},emits:["update:color","change"],setup(e,{emit:l}){const a=new z,t=s(a.parseColor(e.color)),o=s(t.value.oldHue),r=s(!1),u=U(),n=s([]),i=()=>{r.value=!1},c=()=>{n.value=n.value.filter((e=>e!==t.value.hex8)),n.value.length>=8&&n.value.shift(),n.value.push(t.value.hex8),u.setStorage({key:"colorList",data:n.value})},p=()=>{n.value=u.getStorageSync("colorList")||[]},g=(e,l)=>{t.value=a.parseColor(e,l),A(c)},m=()=>{e.format?(l("update:color",a.format(e.format)),l("change",a.format(e.format))):(l("update:color",t.value),l("change",t.value))},y=e=>{"advance"===e?r.value=!0:(o.value=t.value.hsl.h,g(e),m())},x=e=>{g({h:t.value.hsl.h,s:t.value.hsl.s,l:e/100,a:t.value.hsl.a,source:"light"},t.value.hsl.h),m()},C=e=>{g({h:t.value.hsl.h,s:t.value.hsl.s,l:t.value.hsl.l,a:e,source:"alpha"},t.value.hsl.h),m()},k=(e,l)=>{g({h:t.value.hsv.h,s:e,v:l,a:t.value.hsv.a,source:"saturation"},t.value.hsv.h),m()},B=e=>{const{s:l,v:a,a:o}=t.value.hsv;g({h:e,s:l,v:a,a:o,source:"hue"},e),m()},_=e=>{const l=e.target.value;g({hex:l}),m()};v((()=>e.color),(e=>{g(f(e)),p()})),h((()=>{p()}));return()=>d("div",{class:"bee-fk-colorPicker"},[d("div",{class:"bee-fk-colorPicker__inner"},[r.value&&d("div",{class:"bee-fk-colorPicker__header"},[d("span",{style:"cursor: pointer",onClick:i},[d("div",{class:"back"},null),d("span",null,[e.backBtnText])])]),!r.value&&d(V,{onChange:y},null),r.value&&d(N,{saturation:t.value.hsv.s,hue:t.value.hsv.h,value:t.value.hsv.v,onChange:k},null),r.value&&!e.disableHue&&d(O,{hue:t.value.hsv.h,onChange:B},null),!r.value&&!e.disableLight&&d(D,{hue:t.value.hsl.h,light:100*t.value.hsl.l,saturation:100*t.value.hsl.s,onChange:x},null),!e.disableAlpha&&d($,{color:t.value.hex8,onChange:C,alpha:t.value.alpha},null),e.displayCurrentColor&&d("div",{class:"bee-fk-colorPicker__display"},[d("div",{class:"current-color transparent"},[d("div",{class:"color-cube",style:{background:t.value.hex8}},null)]),d("span",{class:"hexColor-prefix"},[b("#")]),d("input",{class:"hexColor-input",value:t.value.hex.replace("#",""),onBlur:_},null),!e.disableClipboard&&d("div",{class:"action"},[d("div",{class:"copy-btn",onClick:()=>(()=>{const{copy:e}=L({source:t.value.hex});e().then()})()},[e.copyBtnText])])]),!e.disableHistory&&n.value.length>0&&d(F,{"color-list":n.value,round:e.historyRound,onChange:y},null)])])}});const X=["hex","hsl","rgb","hsv"];var Y=n({name:"VColorInput",props:{color:{type:[String,Object],default:"#000000"}},emits:["update:color","change"],setup(e,{emit:l}){const a=new z,t=s(X[1]),o=s(a.parseColor(e.color)),r=()=>{const e=P.findIndex(X,(e=>e==t.value));t.value=X[(e+1)%X.length]};v((()=>e.color),(e=>{o.value=a.parseColor(f(e))}));const u=(e,t)=>{o.value=a.parseColor(e,t),l("update:color",o.value),l("change",o.value)},n=e=>{switch(e){case"hex":u({hex:o.value.hex,source:"hex"});break;case"hsl":u({hsl:o.value.hsl,source:"hsl"});break;case"rgb":u({rgb:o.value.rgb,source:"rgb"});break;case"hsv":u({hsv:o.value.hsv,source:"hsv"})}};return()=>d("div",{class:"inputs-controls"},[d("button",{class:"formatBtn",onClick:r},[t.value]),"hsv"===t.value&&d("div",{class:"format-group"},[m(d("input",{"onUpdate:modelValue":e=>o.value.hsv.h=e,type:"number",min:"0",max:"360",placeholder:"h",onBlur:()=>n("hsv")},null),[[y,o.value.hsv.h]]),m(d("input",{"onUpdate:modelValue":e=>o.value.hsv.s=e,type:"number",min:"0",max:"1",placeholder:"s",onBlur:()=>n("hsv")},null),[[y,o.value.hsv.s]]),m(d("input",{"onUpdate:modelValue":e=>o.value.hsv.v=e,type:"number",min:"0",max:"1",placeholder:"v",onBlur:()=>n("hsv")},null),[[y,o.value.hsv.v]])]),"hsl"===t.value&&d("div",{class:"format-group"},[m(d("input",{"onUpdate:modelValue":e=>o.value.hsl.h=e,type:"number",min:"0",max:"360",placeholder:"h",onBlur:()=>n("hsl")},null),[[y,o.value.hsl.h]]),m(d("input",{"onUpdate:modelValue":e=>o.value.hsl.s=e,type:"number",min:"0",max:"1",placeholder:"s",onBlur:()=>n("hsl")},null),[[y,o.value.hsl.s]]),m(d("input",{"onUpdate:modelValue":e=>o.value.hsl.l=e,type:"number",min:"0",max:"1",placeholder:"l",onBlur:()=>n("hsl")},null),[[y,o.value.hsl.l]])]),"rgb"===t.value&&d("div",{class:"format-group"},[m(d("input",{"onUpdate:modelValue":e=>o.value.rgb.r=e,type:"number",min:"0",max:"255",placeholder:"r",onBlur:()=>n("rgb")},null),[[y,o.value.rgb.r]]),m(d("input",{"onUpdate:modelValue":e=>o.value.rgb.g=e,type:"number",min:"0",max:"255",placeholder:"g",onBlur:()=>n("rgb")},null),[[y,o.value.rgb.g]]),m(d("input",{"onUpdate:modelValue":e=>o.value.rgb.b=e,type:"number",min:"0",max:"255",onBlur:()=>n("rgb"),placeholder:"b"},null),[[y,o.value.rgb.b]])]),"hex"===t.value&&d("div",{class:"format-group"},[m(d("input",{"onUpdate:modelValue":e=>o.value.hex=e,type:"text",maxlength:"7",placeholder:"hex",onBlur:()=>n("hex")},null),[[y,o.value.hex]])])])}}),I=n({name:"ChromeColorPicker",props:{color:{type:[String,Object],default:"#000000"},format:{type:String},disableAlpha:Boolean,disableLight:Boolean,disableHue:Boolean,disableHistory:Boolean,disableClipboard:Boolean,historyRound:Boolean},emits:["update:color","change"],setup(e,{emit:l}){const a=new z,t=s(a.parseColor(e.color)),o=U(),r=s([]),u=()=>{r.value=r.value.filter((e=>e!==t.value.hex8)),r.value.length>=8&&r.value.shift(),r.value.push(t.value.hex8),o.setStorage({key:"colorList",data:r.value})},n=()=>{r.value=o.getStorageSync("colorList")||[]},i=(e,l)=>{t.value=a.parseColor(e,l),A(u)},c=()=>{e.format?(l("update:color",a.format(e.format)),l("change",a.format(e.format))):(l("update:color",t.value),l("change",t.value))},p=e=>{i(e),c()},g=e=>{i({h:t.value.hsl.h,s:t.value.hsl.s,l:t.value.hsl.l,a:e,source:"alpha"},t.value.hsl.h),c()},b=(e,l)=>{i({h:t.value.hsv.h,s:e,v:l,a:t.value.hsv.a,source:"saturation"},t.value.hsv.h),c()},m=e=>{const{s:l,v:a,a:o}=t.value.hsv;i({h:e,s:l,v:a,a:o,source:"hue"},e),c()},y=e=>{t.value=e,c()};return v((()=>e.color),(e=>{i(f(e)),n()})),h((()=>{n()})),()=>d("div",{class:"bee-chrome-colorPicker"},[d(N,{saturation:t.value.hsv.s,hue:t.value.hsv.h,value:t.value.hsv.v,onChange:b,round:!0,hidden:!0},null),d("div",{class:"bee-chrome-colorPicker-body"},[d("div",{class:"chrome-controls"},[d("div",{class:"chrome-color-wrap transparent"},[d("div",{class:"current-color",style:{background:t.value.hex8}},null)]),d("div",{class:"chrome-sliders"},[!e.disableHue&&d(O,{hue:t.value.hsv.h,onChange:m,size:"small"},null),!e.disableAlpha&&d($,{size:"small",color:t.value.hex8,onChange:g,alpha:t.value.alpha},null)])]),d(Y,{color:t.value,onChange:y},null),!e.disableHistory&&d(F,{"color-list":r.value,round:e.historyRound,onChange:p},null)])])}}),q=n({name:"EleColorPicker",props:{color:{type:[String,Object],default:"#000000"},format:{type:String},disableAlpha:Boolean,disableLight:Boolean,disableHue:Boolean,disableHistory:Boolean,historyRound:{type:Boolean,default:!0}},emits:["update:color","change"],setup(e,{emit:l}){const a=new z,t=s(a.parseColor(e.color)),o=U(),r=s([]),u=()=>{r.value=r.value.filter((e=>e!==t.value.hex8)),r.value.length>=8&&r.value.shift(),r.value.push(t.value.hex8),o.setStorage({key:"colorList",data:r.value})},n=()=>{r.value=o.getStorageSync("colorList")||[]},i=(e,l)=>{t.value=a.parseColor(e,l),A(u)},c=()=>{e.format?(l("update:color",a.format(e.format)),l("change",a.format(e.format))):(l("update:color",t.value),l("change",t.value))},p=e=>{i(e),c()},g=e=>{i({h:t.value.hsl.h,s:t.value.hsl.s,l:t.value.hsl.l,a:e,source:"alpha"},t.value.hsl.h),c()},b=(e,l)=>{i({h:t.value.hsv.h,s:e,v:l,a:t.value.hsv.a,source:"saturation"},t.value.hsv.h),c()},m=e=>{const{s:l,v:a,a:o}=t.value.hsv;i({h:e,s:l,v:a,a:o,source:"hue"},e),c()},y=e=>{t.value=e,c()};return v((()=>e.color),(e=>{i(f(e)),n()})),h((()=>{n()})),()=>d("div",{class:"bee-ele-colorPicker"},[d("div",{class:"bee-ele-row"},[d(N,{class:"bee-ele-saturation",hidden:!0,saturation:t.value.hsv.s,hue:t.value.hsv.h,value:t.value.hsv.v,onChange:b},null),!e.disableHue&&d(O,{class:"bee-ele-hue",vertical:!0,size:"small",hue:t.value.hsv.h,onChange:m},null)]),!e.disableAlpha&&d($,{style:"width: 257px",color:t.value.hex8,onChange:g,alpha:t.value.alpha},null),d(Y,{style:"width: 257px",color:t.value,onChange:y},null),!e.disableHistory&&d(F,{"color-list":r.value,round:e.historyRound,onChange:p},null)])}}),G=n({name:"PopuColorPicker",components:{FkColorPicker:T},props:{color:{type:[String,Object],default:"#000000"},round:{type:Boolean},mode:{type:String,default:"fk"},pickerProps:{type:Object,default:()=>({})}},emits:["update:color","change"],setup(e,{emit:l}){const a=s(!1),t=s(null),o=s(null),u=s(e.color),n=i((()=>{const e=new z;return e.parseColor(u.value),{background:e.format("hex8")}})),c=()=>{a.value=!0},p=()=>{a.value=!1},g=()=>{l("update:color",u.value),l("change",u.value)};return v((()=>e.color),(e=>{u.value=e})),h((()=>{t.value&&o.value&&R(t.value,o.value,{placement:"auto",modifiers:[{name:"flip",options:{fallbackPlacements:["top","left"]}}]})})),()=>{const l=["bee-color-wrap transparent",{round:e.round}];return d(x,null,[d("div",{class:l,ref:t},[d("div",{class:"current-color",style:n.value,onClick:c},null)]),d(C,{to:"body"},{default:()=>[d("div",{ref:o,class:"data-popper-arrow"},["fk"===e.mode&&a.value&&m(d(T,k({color:u.value,"onUpdate:color":e=>u.value=e,onChange:g},r({},e.pickerProps)),null),[[B("click-outside"),p]]),"ele"===e.mode&&a.value&&m(d(q,k({color:u.value,"onUpdate:color":e=>u.value=e,onChange:g},r({},e.pickerProps)),null),[[B("click-outside"),p]]),"chrome"===e.mode&&a.value&&m(d(I,k({color:u.value,"onUpdate:color":e=>u.value=e,onChange:g},r({},e.pickerProps)),null),[[B("click-outside"),p]])])]})])}}});const J=[T,G,I,q],K={install:e=>{e.use(u),e.use(W),J.forEach((l=>{e.component(l.name,l)}))}};export{I as ChromeColorPicker,q as EleColorPicker,T as FkColorPicker,G as PopuColorPicker,K as default};
